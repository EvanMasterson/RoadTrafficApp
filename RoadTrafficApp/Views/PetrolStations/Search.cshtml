
@{
    ViewBag.Title = "Search";
}

<h2>Search for Petrol Station by ID</h2>

<div class="col-md-10">
    <input type="text" id="StationID" size="5" />
    <input type="submit" name="SearchButton" id="SearchButton" value="Search" />
</div>
<br />
<div id="divProcessing">
    <p>Processing, please wait . . .</p>
</div>
<br />
<div id="divResult"></div>

@section Scripts{
    @Scripts.Render("~/bundles/jqueryval")
    <script type="text/javascript">

        $(document).ready(function(){
            $("#divProcessing").hide();
            $("#SearchButton").click(function(){
                search();
            });
        });

        function search(){
            $("#divResult").empty();
            $("#divProcessing").show();
            var stationID = $("#StationID").val();
            var url = "../api/PetrolStations/" + stationID;
            $.ajax({
                url: url,
                type: "GET",
                dataType: "json",
                success: function(resp){
                    $("#divProcessing").hide();
                    $("<h3>Results</h3>").appendTo("#divResult");
                    $("#divResult").append("<p>Name: " + resp.Name + "<br/>Location: " + resp.Location + "<br/>Petrol: " + resp.Petrol + "<br/>Diesel: " + resp.Diesel + "<br/></p>");
                }
            })
        }


    </script>
}

